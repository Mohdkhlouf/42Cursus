#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LINES 30
#define WORD_SIZE 15
#define STR_SIZE 50

struct s_number {
    int id;
    char word[WORD_SIZE];
};

char	*ft_strncpy(char *dest, char *src, unsigned int n);

int	ft_atoi(char *str);

void str_store(char *str, struct s_number *test, int index)
{
    int i, j;
    char str2[20];
    char str3[20];

    i = 0;
    j = 0;
    // Parse the string before the colon
    while (str[i] != '\0' && str[i] != ':')
    {			
        str2[j] = str[i];
        j++;
        i++;
    }
    str2[j] = '\0'; // Null-terminate the first string

    // Skip the colon and any spaces after it
    if (str[i] == ':')
        i++;
    while (str[i] == ' ')
        i++;

    // Parse the string after the colon
    j = 0;
    while (str[i] != '\0' && str[i] != '\n')
    {	
        str3[j] = str[i];
        j++;
        i++;
    }
    str3[j] = '\0'; // Null-terminate the second string

    // Store parsed values in the structure
    test[index].id = ft_atoi(str2); // Convert string to integer for id
    ft_strncpy(test[index].word, str3, sizeof(test[index].word) - 1);
    test[index].word[sizeof(test[index].word) - 1] = '\0'; // Ensure null-termination
}
 


int main(void)
{
    char str[STR_SIZE];
    struct s_number test[MAX_LINES]; // Array to store multiple entries
    int count = 0;

    FILE *indect; // pointer to file

    indect = fopen("dics/numbers.dict", "r"); // Open the file for reading
    if (indect == NULL) {
        fprintf(stderr, "\nError opening file\n");
        exit(1);
    }

    // Read each line from the file
    while (fgets(str, sizeof(str), indect) != NULL && count < MAX_LINES) {
        str_store(str, test, count); // Process each line and store in the array
        count++;
    }

	
    fclose(indect); // Close the file after reading

    // Print all stored entries
    for (int i = 0; i < count; i++) {
        printf("ID: %d, Word: %s\n", test[i].id, test[i].word);
    }

    return 0;
}

